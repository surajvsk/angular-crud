<app-navbar></app-navbar>
<div class="container">
    <div class="row">
        <div class="col-md-6">
            <div class="mb-3">
                <label class="form-label">Product Name</label>
                <input type="text" class="form-control rounded-0" placeholder="Enter product name" [(ngModel)]="productName"
                    name="productName" />
            </div>
        </div>


        <div class="col-md-6">
            <div class="mb-3">
                <label class="form-label">Price</label>
                <input type="number" class="form-control rounded-0" placeholder="Enter price" [(ngModel)]="productPrice"
                    name="productPrice" />
            </div>
        </div>


        <div class="col-md-6">
            <div class="mb-3">
                <label class="form-label">Category Unique ID</label>
                <input type="text" class="form-control rounded-0" placeholder="e.g., CAT-NUG2658N" [(ngModel)]="categoryUniqueId"
                    name="categoryUniqueId" />
            </div>
        </div>


        <div class="col-md-6">
            <div class="mb-3">
                <label class="form-label">Product Image</label>
                <input type="file" class="form-control rounded-0" (change)="onFileSelected($event)" />
            </div>
        </div>


    </div>

    <button (click)="addProduct()" class="btn btn-primary mb-3 rounded-0">
        Add Product
    </button>
</div>

<div class="container">
    <!-- Search Bar -->
    <div class="mb-3">
        <input type="text" class="form-control rounded-0" placeholder="Search by name or unique ID..." [(ngModel)]="searchTerm"
            (input)="onSearchChange()" />
    </div>

    <!-- Products Table -->
    <div class="card mt-3 rounded-0">
        <div class="card-body">
            <p class="card-title">Product List</p>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Product Name</th>
                        <th>Product Code</th>
                        <th>Category</th>
                        <th>Category Code</th>
                        <th>Price</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let product of products; trackBy: trackById">
                        <td>{{ product.id }}</td>
                        <td>{{ product.name }}</td>
                        <td>{{ product.uniqueId}}</td>
                        <td>{{ product.CategoryName }}</td>
                        <td>{{ product.CategoryUniqueId }}</td>
                        <td>{{ product.price }}</td>
                        <td>
                            <button (click)="editCategory(product)" class="btn btn-warning btn-sm me-2 rounded-0">
                                Edit
                            </button>
                            <button (click)="deleteCategory(product.id)" class="btn btn-danger btn-sm rounded-0">
                                Delete
                            </button>
                        </td>
                    </tr>

                    <tr *ngIf="products.length === 0">
                        <td colspan="7" class="text-center text-muted">
                            No matching categories found.
                        </td>
                    </tr>
                </tbody>
            </table>

            <!-- Pagination Controls -->
            <nav *ngIf="totalPages > 1" class="mt-3">
                <ul class="pagination justify-content-center rounded-0">
                    <li class="page-item rounded-0" [class.disabled]="currentPage === 1">
                        <button class="page-link rounded-0" (click)="changePage(currentPage - 1)">
                            Previous
                        </button>
                    </li>

                    <li class="page-item rounded-0" *ngFor="let page of [].constructor(totalPages); let i = index"
                        [class.active]="currentPage === i + 1">
                        <button class="page-link rounded-0" (click)="changePage(i + 1)">
                            {{ i + 1 }}
                        </button>
                    </li>

                    <li class="page-item rounded-0" [class.disabled]="currentPage === totalPages">
                        <button class="page-link rounded-0" (click)="changePage(currentPage + 1)">
                            Next
                        </button>
                    </li>
                </ul>
            </nav>
        </div>
    </div>


</div>